<Page
    x:Class="GetStoreApp.Views.Pages.HistoryPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:basicInput="using:GetStoreApp.Views.CustomControls.BasicInput"
    xmlns:converter="using:GetStoreApp.Converters.Formats"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:history="using:GetStoreApp.Models.Controls.History"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:menusAndToolbars="using:GetStoreApp.Views.CustomControls.MenusAndToolbars"
    xmlns:pageViewModel="using:GetStoreApp.ViewModels.Pages"
    xmlns:root="using:GetStoreApp.Services.Root"
    xmlns:sys="using:System"
    x:Name="HistoryRoot"
    Loaded="{x:Bind HistoryPageLoaded}"
    NavigationCacheMode="Enabled"
    mc:Ignorable="d">

    <Page.DataContext>
        <pageViewModel:HistoryViewModel x:Name="ViewModel" />
    </Page.DataContext>

    <Page.Resources>
        <converter:ChannelNameFormatConverter x:Name="ChannelNameFormatConverter" />
        <converter:CheckBoxToolTipFormatConverter x:Name="CheckBoxToolTipFormatConverter" />
        <converter:TypeNameFormatConverter x:Name="TypeNameFormatConverter" />
    </Page.Resources>

    <Grid Padding="0">

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <TextBlock
            Grid.Row="0"
            Margin="30,15,30,0"
            FontSize="26"
            Text="{x:Bind root:ResourceService.GetLocalized('History/Title')}" />

        <Grid
            Grid.Row="1"
            Margin="30,5,30,0"
            Style="{StaticResource ListViewHeaderGridStyle}">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <FontIcon
                Grid.Column="0"
                FontFamily="{StaticResource SegoeFluentFontFamily}"
                Glyph="&#xE74C;"
                Style="{StaticResource FontIconStyle}" />
            <TextBlock
                Grid.Column="1"
                VerticalAlignment="Center"
                Text="{x:Bind root:ResourceService.GetLocalized('History/Operation')}" />
            <AppBarSeparator Grid.Column="2" Margin="10,0,10,0" />

            <TextBlock
                Grid.Column="3"
                VerticalAlignment="Center"
                Text="{x:Bind LocalizeHistoryCountInfo(ViewModel.HistoryDataList.Count), Mode=OneWay}">

                <ToolTipService.ToolTip>
                    <ToolTip
                        Content="{x:Bind LocalizeHistoryCountInfo(ViewModel.HistoryDataList.Count), Mode=OneWay}"
                        Placement="Bottom"
                        VerticalOffset="20" />
                </ToolTipService.ToolTip>
            </TextBlock>

            <CommandBar
                x:Name="NormalMode"
                Grid.Column="4"
                VerticalAlignment="Center"
                x:Load="{x:Bind ViewModel.IsSelectMode, Converter={StaticResource BooleanToOppositeValueConverter}, Mode=OneWay}"
                Background="Transparent"
                DefaultLabelPosition="Right">

                <menusAndToolbars:ExtendedAppBarButton
                    Command="{x:Bind ViewModel.SelectCommand}"
                    Cursor="Hand"
                    IsEnabled="{x:Bind sys:Convert.ToBoolean(ViewModel.HistoryDataList.Count), Mode=OneWay}"
                    Label="{x:Bind root:ResourceService.GetLocalized('History/Select')}">

                    <menusAndToolbars:ExtendedAppBarButton.Icon>
                        <FontIcon Glyph="&#xE762;" Style="{StaticResource SegoeFluentStyle}" />
                    </menusAndToolbars:ExtendedAppBarButton.Icon>

                    <ToolTipService.ToolTip>
                        <ToolTip
                            Content="{x:Bind root:ResourceService.GetLocalized('History/SelectToolTip')}"
                            Placement="Bottom"
                            VerticalOffset="25" />
                    </ToolTipService.ToolTip>
                </menusAndToolbars:ExtendedAppBarButton>

                <menusAndToolbars:ExtendedAppBarButton
                    Cursor="Hand"
                    IsEnabled="{x:Bind sys:Convert.ToBoolean(ViewModel.HistoryDataList.Count), Mode=OneWay}"
                    Label="{x:Bind root:ResourceService.GetLocalized('History/Sort')}">

                    <menusAndToolbars:ExtendedAppBarButton.Icon>
                        <FontIcon Glyph="&#xE8cb;" Style="{StaticResource SegoeFluentStyle}" />
                    </menusAndToolbars:ExtendedAppBarButton.Icon>

                    <ToolTipService.ToolTip>
                        <ToolTip
                            Content="{x:Bind root:ResourceService.GetLocalized('History/SortToolTip')}"
                            Placement="Bottom"
                            VerticalOffset="25" />
                    </ToolTipService.ToolTip>

                    <menusAndToolbars:ExtendedAppBarButton.Flyout>
                        <menusAndToolbars:AdaptiveMenuFlyout>

                            <RadioMenuFlyoutItem
                                Command="{x:Bind ViewModel.TimeSortCommand}"
                                CommandParameter="True"
                                IsChecked="{x:Bind ViewModel.TimeSortOrder, Converter={StaticResource TimeSortValueCheckConverter}, ConverterParameter=true, Mode=OneWay}"
                                Text="{x:Bind root:ResourceService.GetLocalized('History/TimeIncreaseSort')}">

                                <RadioMenuFlyoutItem.Icon>
                                    <FontIcon Glyph="&#xE74a;" Style="{StaticResource SegoeFluentStyle}" />
                                </RadioMenuFlyoutItem.Icon>

                                <ToolTipService.ToolTip>
                                    <ToolTip
                                        Content="{x:Bind root:ResourceService.GetLocalized('History/TimeIncreaseSortToolTip')}"
                                        Placement="Bottom"
                                        VerticalOffset="20" />
                                </ToolTipService.ToolTip>
                            </RadioMenuFlyoutItem>

                            <RadioMenuFlyoutItem
                                Command="{x:Bind ViewModel.TimeSortCommand}"
                                CommandParameter="False"
                                IsChecked="{x:Bind ViewModel.TimeSortOrder, Converter={StaticResource TimeSortValueCheckConverter}, ConverterParameter=false, Mode=OneWay}"
                                Text="{x:Bind root:ResourceService.GetLocalized('History/TimeDecreaseSort')}">

                                <RadioMenuFlyoutItem.Icon>
                                    <FontIcon Glyph="&#xE74b;" Style="{StaticResource SegoeFluentStyle}" />
                                </RadioMenuFlyoutItem.Icon>

                                <ToolTipService.ToolTip>
                                    <ToolTip
                                        Content="{x:Bind root:ResourceService.GetLocalized('History/TimeDecreaseSortToolTip')}"
                                        Placement="Bottom"
                                        VerticalOffset="20" />
                                </ToolTipService.ToolTip>
                            </RadioMenuFlyoutItem>
                        </menusAndToolbars:AdaptiveMenuFlyout>
                    </menusAndToolbars:ExtendedAppBarButton.Flyout>
                </menusAndToolbars:ExtendedAppBarButton>

                <menusAndToolbars:ExtendedAppBarButton Cursor="Hand" Label="{x:Bind root:ResourceService.GetLocalized('History/Filter')}">

                    <menusAndToolbars:ExtendedAppBarButton.Icon>
                        <FontIcon Glyph="&#xE71C;" Style="{StaticResource SegoeFluentStyle}" />
                    </menusAndToolbars:ExtendedAppBarButton.Icon>

                    <ToolTipService.ToolTip>
                        <ToolTip
                            Content="{x:Bind root:ResourceService.GetLocalized('History/FilterToolTip')}"
                            Placement="Bottom"
                            VerticalOffset="25" />
                    </ToolTipService.ToolTip>

                    <menusAndToolbars:ExtendedAppBarButton.Flyout>

                        <menusAndToolbars:AdaptiveMenuFlyout>
                            <MenuFlyoutSubItem Text="{x:Bind root:ResourceService.GetLocalized('History/Type')}">
                                <RadioMenuFlyoutItem
                                    Command="{x:Bind ViewModel.TypeFilterCommand}"
                                    CommandParameter="url"
                                    GroupName="TypeFilter"
                                    IsChecked="{x:Bind ViewModel.TypeFilter, Converter={StaticResource FilterValueCheckConverter}, ConverterParameter=url, Mode=OneWay}"
                                    Text="{x:Bind root:ResourceService.GetLocalized('Resources/URL')}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip
                                            Content="{x:Bind root:ResourceService.GetLocalized('Resources/URL')}"
                                            Placement="Bottom"
                                            VerticalOffset="20" />
                                    </ToolTipService.ToolTip>
                                </RadioMenuFlyoutItem>

                                <RadioMenuFlyoutItem
                                    Command="{x:Bind ViewModel.TypeFilterCommand}"
                                    CommandParameter="ProductId"
                                    GroupName="TypeFilter"
                                    IsChecked="{x:Bind ViewModel.TypeFilter, Converter={StaticResource FilterValueCheckConverter}, ConverterParameter=ProductId, Mode=OneWay}"
                                    Text="{x:Bind root:ResourceService.GetLocalized('Resources/ProductID')}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip
                                            Content="{x:Bind root:ResourceService.GetLocalized('Resources/ProductID')}"
                                            Placement="Bottom"
                                            VerticalOffset="20" />
                                    </ToolTipService.ToolTip>
                                </RadioMenuFlyoutItem>

                                <RadioMenuFlyoutItem
                                    Command="{x:Bind ViewModel.TypeFilterCommand}"
                                    CommandParameter="PackageFamilyName"
                                    GroupName="TypeFilter"
                                    IsChecked="{x:Bind ViewModel.TypeFilter, Converter={StaticResource FilterValueCheckConverter}, ConverterParameter=PackageFamilyName, Mode=OneWay}"
                                    Text="{x:Bind root:ResourceService.GetLocalized('Resources/PackageFamilyName')}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip
                                            Content="{x:Bind root:ResourceService.GetLocalized('Resources/PackageFamilyName')}"
                                            Placement="Bottom"
                                            VerticalOffset="20" />
                                    </ToolTipService.ToolTip>
                                </RadioMenuFlyoutItem>

                                <RadioMenuFlyoutItem
                                    Command="{x:Bind ViewModel.TypeFilterCommand}"
                                    CommandParameter="CategoryId"
                                    GroupName="TypeFilter"
                                    IsChecked="{x:Bind ViewModel.TypeFilter, Converter={StaticResource FilterValueCheckConverter}, ConverterParameter=CategoryId, Mode=OneWay}"
                                    Text="{x:Bind root:ResourceService.GetLocalized('Resources/CategoryID')}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip
                                            Content="{x:Bind root:ResourceService.GetLocalized('Resources/CategoryID')}"
                                            Placement="Bottom"
                                            VerticalOffset="20" />
                                    </ToolTipService.ToolTip>
                                </RadioMenuFlyoutItem>

                                <MenuFlyoutSeparator />

                                <RadioMenuFlyoutItem
                                    Command="{x:Bind ViewModel.TypeFilterCommand}"
                                    CommandParameter="None"
                                    GroupName="TypeFilter"
                                    IsChecked="{x:Bind ViewModel.TypeFilter, Converter={StaticResource FilterValueCheckConverter}, ConverterParameter=None, Mode=OneWay}"
                                    Text="{x:Bind root:ResourceService.GetLocalized('History/None')}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip
                                            Content="{x:Bind root:ResourceService.GetLocalized('History/None')}"
                                            Placement="Bottom"
                                            VerticalOffset="20" />
                                    </ToolTipService.ToolTip>
                                </RadioMenuFlyoutItem>
                            </MenuFlyoutSubItem>

                            <MenuFlyoutSubItem Text="{x:Bind root:ResourceService.GetLocalized('History/Channel')}">

                                <ToolTipService.ToolTip>
                                    <ToolTip
                                        Content="{x:Bind root:ResourceService.GetLocalized('History/Channel')}"
                                        Placement="Bottom"
                                        VerticalOffset="20" />
                                </ToolTipService.ToolTip>

                                <RadioMenuFlyoutItem
                                    Command="{x:Bind ViewModel.ChannelFilterCommand}"
                                    CommandParameter="WIF"
                                    GroupName="ChannelFilter"
                                    IsChecked="{x:Bind ViewModel.ChannelFilter, Converter={StaticResource FilterValueCheckConverter}, ConverterParameter=WIF, Mode=OneWay}"
                                    Text="{x:Bind root:ResourceService.GetLocalized('Resources/Fast')}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip
                                            Content="{x:Bind root:ResourceService.GetLocalized('Resources/Fast')}"
                                            Placement="Bottom"
                                            VerticalOffset="20" />
                                    </ToolTipService.ToolTip>
                                </RadioMenuFlyoutItem>

                                <RadioMenuFlyoutItem
                                    Command="{x:Bind ViewModel.ChannelFilterCommand}"
                                    CommandParameter="WIS"
                                    GroupName="ChannelFilter"
                                    IsChecked="{x:Bind ViewModel.ChannelFilter, Converter={StaticResource FilterValueCheckConverter}, ConverterParameter=WIS, Mode=OneWay}"
                                    Text="{x:Bind root:ResourceService.GetLocalized('Resources/Slow')}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip
                                            Content="{x:Bind root:ResourceService.GetLocalized('Resources/Slow')}"
                                            Placement="Bottom"
                                            VerticalOffset="20" />
                                    </ToolTipService.ToolTip>
                                </RadioMenuFlyoutItem>

                                <RadioMenuFlyoutItem
                                    Command="{x:Bind ViewModel.ChannelFilterCommand}"
                                    CommandParameter="RP"
                                    GroupName="ChannelFilter"
                                    IsChecked="{x:Bind ViewModel.ChannelFilter, Converter={StaticResource FilterValueCheckConverter}, ConverterParameter=RP, Mode=OneWay}"
                                    Text="{x:Bind root:ResourceService.GetLocalized('Resources/RP')}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip
                                            Content="{x:Bind root:ResourceService.GetLocalized('Resources/RP')}"
                                            Placement="Bottom"
                                            VerticalOffset="20" />
                                    </ToolTipService.ToolTip>
                                </RadioMenuFlyoutItem>

                                <RadioMenuFlyoutItem
                                    Command="{x:Bind ViewModel.ChannelFilterCommand}"
                                    CommandParameter="Retail"
                                    GroupName="ChannelFilter"
                                    IsChecked="{x:Bind ViewModel.ChannelFilter, Converter={StaticResource FilterValueCheckConverter}, ConverterParameter=Retail, Mode=OneWay}"
                                    Text="{x:Bind root:ResourceService.GetLocalized('Resources/Retail')}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip
                                            Content="{x:Bind root:ResourceService.GetLocalized('Resources/Retail')}"
                                            Placement="Bottom"
                                            VerticalOffset="20" />
                                    </ToolTipService.ToolTip>
                                </RadioMenuFlyoutItem>

                                <MenuFlyoutSeparator />

                                <RadioMenuFlyoutItem
                                    Command="{x:Bind ViewModel.ChannelFilterCommand}"
                                    CommandParameter="None"
                                    GroupName="ChannelFilter"
                                    IsChecked="{x:Bind ViewModel.ChannelFilter, Converter={StaticResource FilterValueCheckConverter}, ConverterParameter=None, Mode=OneWay}"
                                    Text="{x:Bind root:ResourceService.GetLocalized('History/None')}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip
                                            Content="{x:Bind root:ResourceService.GetLocalized('History/None')}"
                                            Placement="Bottom"
                                            VerticalOffset="20" />
                                    </ToolTipService.ToolTip>
                                </RadioMenuFlyoutItem>
                            </MenuFlyoutSubItem>
                        </menusAndToolbars:AdaptiveMenuFlyout>
                    </menusAndToolbars:ExtendedAppBarButton.Flyout>
                </menusAndToolbars:ExtendedAppBarButton>

                <menusAndToolbars:ExtendedAppBarButton
                    Command="{x:Bind ViewModel.RefreshCommand}"
                    Cursor="Hand"
                    IsEnabled="{x:Bind sys:Convert.ToBoolean(ViewModel.HistoryDataList.Count), Mode=OneWay}"
                    Label="{x:Bind root:ResourceService.GetLocalized('History/Refresh')}">
                    <menusAndToolbars:ExtendedAppBarButton.Icon>
                        <FontIcon Glyph="&#xE72c;" Style="{StaticResource SegoeFluentStyle}" />
                    </menusAndToolbars:ExtendedAppBarButton.Icon>

                    <ToolTipService.ToolTip>
                        <ToolTip
                            Content="{x:Bind root:ResourceService.GetLocalized('History/RefreshToolTip')}"
                            Placement="Bottom"
                            VerticalOffset="25" />
                    </ToolTipService.ToolTip>
                </menusAndToolbars:ExtendedAppBarButton>
            </CommandBar>

            <CommandBar
                x:Name="SelectMode"
                Grid.Column="4"
                VerticalAlignment="Center"
                x:Load="{x:Bind ViewModel.IsSelectMode, Mode=OneWay}"
                Background="Transparent"
                DefaultLabelPosition="Right">

                <menusAndToolbars:ExtendedAppBarButton
                    Command="{x:Bind ViewModel.SelectAllCommand}"
                    Cursor="Hand"
                    Label="{x:Bind root:ResourceService.GetLocalized('History/SelectAll')}">

                    <menusAndToolbars:ExtendedAppBarButton.Icon>
                        <FontIcon Glyph="&#xE8b3;" Style="{StaticResource SegoeFluentStyle}" />
                    </menusAndToolbars:ExtendedAppBarButton.Icon>

                    <ToolTipService.ToolTip>
                        <ToolTip
                            Content="{x:Bind root:ResourceService.GetLocalized('History/SelectAll')}"
                            Placement="Bottom"
                            VerticalOffset="25" />
                    </ToolTipService.ToolTip>
                </menusAndToolbars:ExtendedAppBarButton>

                <menusAndToolbars:ExtendedAppBarButton
                    Command="{x:Bind ViewModel.SelectNoneCommand}"
                    Cursor="Hand"
                    Label="{x:Bind root:ResourceService.GetLocalized('History/SelectNone')}">

                    <menusAndToolbars:ExtendedAppBarButton.Icon>
                        <FontIcon Glyph="&#xE8e6;" Style="{StaticResource SegoeFluentStyle}" />
                    </menusAndToolbars:ExtendedAppBarButton.Icon>

                    <ToolTipService.ToolTip>
                        <ToolTip
                            Content="{x:Bind root:ResourceService.GetLocalized('History/SelectNone')}"
                            Placement="Bottom"
                            VerticalOffset="25" />
                    </ToolTipService.ToolTip>
                </menusAndToolbars:ExtendedAppBarButton>

                <menusAndToolbars:ExtendedAppBarButton
                    Command="{x:Bind ViewModel.CopySelectedCommand}"
                    Cursor="Hand"
                    Label="{x:Bind root:ResourceService.GetLocalized('History/CopySelected')}">

                    <menusAndToolbars:ExtendedAppBarButton.Icon>
                        <FontIcon Glyph="&#xE8c8;" Style="{StaticResource SegoeFluentStyle}" />
                    </menusAndToolbars:ExtendedAppBarButton.Icon>

                    <ToolTipService.ToolTip>
                        <ToolTip
                            Content="{x:Bind root:ResourceService.GetLocalized('History/CopySelectedToolTip')}"
                            Placement="Bottom"
                            VerticalOffset="25" />
                    </ToolTipService.ToolTip>
                </menusAndToolbars:ExtendedAppBarButton>

                <menusAndToolbars:ExtendedAppBarButton
                    Command="{x:Bind ViewModel.DeleteCommand}"
                    Cursor="Hand"
                    Label="{x:Bind root:ResourceService.GetLocalized('History/Delete')}">

                    <menusAndToolbars:ExtendedAppBarButton.Icon>
                        <FontIcon Glyph="&#xE74d;" Style="{StaticResource SegoeFluentStyle}" />
                    </menusAndToolbars:ExtendedAppBarButton.Icon>

                    <ToolTipService.ToolTip>
                        <ToolTip
                            Content="{x:Bind root:ResourceService.GetLocalized('History/DeleteToolTip')}"
                            Placement="Bottom"
                            VerticalOffset="25" />
                    </ToolTipService.ToolTip>
                </menusAndToolbars:ExtendedAppBarButton>

                <menusAndToolbars:ExtendedAppBarButton
                    Command="{x:Bind ViewModel.CancelCommand}"
                    Cursor="Hand"
                    Label="{x:Bind root:ResourceService.GetLocalized('History/Cancel')}">

                    <menusAndToolbars:ExtendedAppBarButton.Icon>
                        <FontIcon Glyph="&#xE711;" Style="{StaticResource SegoeFluentStyle}" />
                    </menusAndToolbars:ExtendedAppBarButton.Icon>

                    <ToolTipService.ToolTip>
                        <ToolTip
                            Content="{x:Bind root:ResourceService.GetLocalized('History/CancelToolTip')}"
                            Placement="Bottom"
                            VerticalOffset="25" />
                    </ToolTipService.ToolTip>
                </menusAndToolbars:ExtendedAppBarButton>
            </CommandBar>
        </Grid>

        <ScrollViewer
            x:Name="HistoryScroll"
            Grid.Row="2"
            HorizontalScrollBarVisibility="Disabled"
            HorizontalScrollMode="Disabled"
            Style="{StaticResource ScrollViewerStyle}"
            VerticalScrollBarVisibility="Auto"
            VerticalScrollMode="Enabled">

            <StackPanel Margin="30,0" Padding="0,3,0,30">

                <Grid Style="{StaticResource CardGridStyle}" Visibility="{x:Bind ViewModel.IsHistoryEmpty, Converter={StaticResource BooleanToVisibilityConverter}, Mode=OneWay}">

                    <TextBlock
                        Margin="0,10,0,10"
                        VerticalAlignment="Center"
                        Text="{x:Bind root:ResourceService.GetLocalized('History/HistoryEmptyDescription')}"
                        TextAlignment="Center" />
                </Grid>

                <Grid Visibility="{x:Bind ViewModel.IsHistoryEmpty, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Reverse, Mode=OneWay}">

                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <Grid
                        Grid.Row="0"
                        Style="{StaticResource CardGridStyle}"
                        Visibility="{x:Bind ViewModel.IsHistoryEmptyAfterFilter, Converter={StaticResource BooleanToVisibilityConverter}, Mode=OneWay}">
                        <TextBlock
                            Margin="0,10,0,10"
                            VerticalAlignment="Center"
                            Text="{x:Bind root:ResourceService.GetLocalized('History/HistoryFilterEmptyDescription')}"
                            TextAlignment="Center" />
                    </Grid>

                    <ListView
                        Grid.Row="1"
                        IsItemClickEnabled="{x:Bind ViewModel.IsSelectMode, Mode=OneWay}"
                        ItemClick="{x:Bind ViewModel.OnItemClick}"
                        ItemContainerStyle="{StaticResource DataGridListViewItemStyle}"
                        ItemsSource="{x:Bind ViewModel.HistoryDataList, Mode=OneWay}"
                        SelectionMode="None"
                        Visibility="{x:Bind ViewModel.IsHistoryEmptyAfterFilter, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Reverse, Mode=OneWay}">

                        <ItemsControl.ItemContainerTransitions>
                            <TransitionCollection />
                        </ItemsControl.ItemContainerTransitions>

                        <ListView.Header>
                            <Grid
                                Height="35"
                                Padding="6,0,0,0"
                                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                BorderThickness="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="1.5*" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="3*" />
                                    <ColumnDefinition Width="135" />
                                </Grid.ColumnDefinitions>

                                <TextBlock
                                    Grid.Column="0"
                                    Width="50"
                                    Margin="10,0,0,0"
                                    VerticalAlignment="Center"
                                    Text="{x:Bind root:ResourceService.GetLocalized('History/Select')}"
                                    Visibility="{x:Bind ViewModel.IsSelectMode, Converter={StaticResource BooleanToVisibilityConverter}, Mode=OneWay}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip
                                            Content="{x:Bind root:ResourceService.GetLocalized('History/Select')}"
                                            Placement="Bottom"
                                            VerticalOffset="20" />
                                    </ToolTipService.ToolTip>
                                </TextBlock>

                                <TextBlock
                                    Grid.Column="1"
                                    Margin="10,0,0,0"
                                    VerticalAlignment="Center"
                                    Text="{x:Bind root:ResourceService.GetLocalized('History/DateTime')}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip
                                            Content="{x:Bind root:ResourceService.GetLocalized('History/DateTime')}"
                                            Placement="Bottom"
                                            VerticalOffset="20" />
                                    </ToolTipService.ToolTip>
                                </TextBlock>

                                <TextBlock
                                    Grid.Column="2"
                                    Margin="10,0,0,0"
                                    VerticalAlignment="Center"
                                    Text="{x:Bind root:ResourceService.GetLocalized('History/Type')}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip
                                            Content="{x:Bind root:ResourceService.GetLocalized('History/Type')}"
                                            Placement="Bottom"
                                            VerticalOffset="20" />
                                    </ToolTipService.ToolTip>
                                </TextBlock>

                                <TextBlock
                                    Grid.Column="3"
                                    Margin="10,0,0,0"
                                    VerticalAlignment="Center"
                                    Text="{x:Bind root:ResourceService.GetLocalized('History/Channel')}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip
                                            Content="{x:Bind root:ResourceService.GetLocalized('History/Channel')}"
                                            Placement="Bottom"
                                            VerticalOffset="20" />
                                    </ToolTipService.ToolTip>
                                </TextBlock>

                                <TextBlock
                                    Grid.Column="4"
                                    Margin="10,0,0,0"
                                    VerticalAlignment="Center"
                                    Text="{x:Bind root:ResourceService.GetLocalized('History/Link')}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip
                                            Content="{x:Bind root:ResourceService.GetLocalized('History/Link')}"
                                            Placement="Bottom"
                                            VerticalOffset="20" />
                                    </ToolTipService.ToolTip>
                                </TextBlock>

                                <TextBlock
                                    Grid.Column="5"
                                    Grid.ColumnSpan="2"
                                    Margin="10,0,0,0"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Center"
                                    Text="{x:Bind root:ResourceService.GetLocalized('History/Options')}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip
                                            Content="{x:Bind root:ResourceService.GetLocalized('History/OptionsToolTip')}"
                                            Placement="Bottom"
                                            VerticalOffset="20" />
                                    </ToolTipService.ToolTip>
                                </TextBlock>
                            </Grid>
                        </ListView.Header>

                        <ListView.ItemTemplate>
                            <DataTemplate x:DataType="history:HistoryModel">
                                <Grid
                                    Height="35"
                                    Padding="6,0,0,0"
                                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                    BorderThickness="1,0,1,1">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="1.5*" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="3*" />
                                        <ColumnDefinition Width="70" />
                                        <ColumnDefinition Width="65" />
                                    </Grid.ColumnDefinitions>

                                    <basicInput:ExtendedCheckBox
                                        Grid.Column="0"
                                        Width="50"
                                        Margin="10,0,0,0"
                                        HorizontalAlignment="Left"
                                        VerticalAlignment="Center"
                                        Cursor="Hand"
                                        IsChecked="{x:Bind IsSelected, Mode=TwoWay}"
                                        IsThreeState="False"
                                        Style="{StaticResource CheckBoxStyle}"
                                        Visibility="{Binding ElementName=HistoryRoot, Path=DataContext.IsSelectMode, Converter={StaticResource BooleanToVisibilityConverter}, Mode=OneWay}">

                                        <ToolTipService.ToolTip>
                                            <ToolTip
                                                Content="{Binding IsSelected, Converter={StaticResource CheckBoxToolTipFormatConverter}, ConverterParameter=History, Mode=OneWay}"
                                                Placement="Bottom"
                                                VerticalOffset="25" />
                                        </ToolTipService.ToolTip>
                                    </basicInput:ExtendedCheckBox>

                                    <TextBlock
                                        Grid.Column="1"
                                        Margin="10,0,0,0"
                                        VerticalAlignment="Center"
                                        Text="{x:Bind CreateTimeStamp, Converter={StaticResource TimeStampFormatConverter}}">

                                        <ToolTipService.ToolTip>
                                            <ToolTip
                                                Content="{x:Bind CreateTimeStamp, Converter={StaticResource TimeStampFormatConverter}}"
                                                Placement="Bottom"
                                                VerticalOffset="20" />
                                        </ToolTipService.ToolTip>
                                    </TextBlock>

                                    <TextBlock
                                        Grid.Column="2"
                                        Margin="10,0,0,0"
                                        VerticalAlignment="Center"
                                        Text="{x:Bind HistoryType, Converter={StaticResource TypeNameFormatConverter}}">

                                        <ToolTipService.ToolTip>
                                            <ToolTip
                                                Content="{x:Bind HistoryType, Converter={StaticResource TypeNameFormatConverter}}"
                                                Placement="Bottom"
                                                VerticalOffset="20" />
                                        </ToolTipService.ToolTip>
                                    </TextBlock>

                                    <TextBlock
                                        Grid.Column="3"
                                        Margin="10,0,0,0"
                                        VerticalAlignment="Center"
                                        Text="{x:Bind HistoryChannel, Converter={StaticResource ChannelNameFormatConverter}}">

                                        <ToolTipService.ToolTip>
                                            <ToolTip
                                                Content="{x:Bind HistoryChannel, Converter={StaticResource ChannelNameFormatConverter}}"
                                                Placement="Bottom"
                                                VerticalOffset="20" />
                                        </ToolTipService.ToolTip>
                                    </TextBlock>

                                    <TextBlock
                                        Grid.Column="4"
                                        Margin="10,0,0,0"
                                        VerticalAlignment="Center"
                                        Text="{x:Bind HistoryLink}">

                                        <ToolTipService.ToolTip>
                                            <ToolTip
                                                Content="{x:Bind HistoryLink}"
                                                Placement="Bottom"
                                                VerticalOffset="20" />
                                        </ToolTipService.ToolTip>
                                    </TextBlock>

                                    <HyperlinkButton
                                        Grid.Column="5"
                                        Margin="10,0,0,0"
                                        Command="{Binding ElementName=HistoryRoot, Path=DataContext.FillinCommand, Mode=OneTime}"
                                        CommandParameter="{Binding}"
                                        Content="{Binding ElementName=HistoryRoot, Path=Fillin, Mode=OneTime}"
                                        IsEnabled="{Binding ElementName=HistoryRoot, Path=DataContext.IsSelectMode, Converter={StaticResource BooleanToOppositeValueConverter}, Mode=OneWay}"
                                        Style="{StaticResource HyperlinkButtonStyle}">

                                        <ToolTipService.ToolTip>
                                            <ToolTip
                                                Content="{Binding ElementName=HistoryRoot, Path=FillinToolTip, Mode=OneTime}"
                                                Placement="Bottom"
                                                VerticalOffset="25" />
                                        </ToolTipService.ToolTip>
                                    </HyperlinkButton>

                                    <HyperlinkButton
                                        Grid.Column="6"
                                        Command="{Binding ElementName=HistoryRoot, Path=DataContext.CopyCommand, Mode=OneTime}"
                                        CommandParameter="{Binding}"
                                        Content="{Binding ElementName=HistoryRoot, Path=Copy, Mode=OneTime}"
                                        IsEnabled="{Binding ElementName=HistoryRoot, Path=DataContext.IsSelectMode, Converter={StaticResource BooleanToOppositeValueConverter}, Mode=OneWay}"
                                        Style="{StaticResource HyperlinkButtonStyle}">

                                        <ToolTipService.ToolTip>
                                            <ToolTip
                                                Content="{Binding ElementName=HistoryRoot, Path=CopyToolTip, Mode=OneTime}"
                                                Placement="Bottom"
                                                VerticalOffset="25" />
                                        </ToolTipService.ToolTip>
                                    </HyperlinkButton>
                                </Grid>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </Grid>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>
