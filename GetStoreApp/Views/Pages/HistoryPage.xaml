<Page
    x:Class="GetStoreApp.Views.Pages.HistoryPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controlExtensions="using:GetStoreApp.Helpers.Controls.Extensions"
    xmlns:converter="using:GetStoreApp.Helpers.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:history="using:GetStoreApp.Models.Controls.History"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:pageViewModel="using:GetStoreApp.ViewModels.Pages"
    xmlns:root="using:GetStoreApp.Services.Root"
    xmlns:sys="using:System"
    x:Name="HistoryRoot"
    NavigationCacheMode="Enabled"
    mc:Ignorable="d">

    <Page.DataContext>
        <pageViewModel:HistoryViewModel x:Name="ViewModel" />
    </Page.DataContext>

    <Grid Padding="0">

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <TextBlock
            Grid.Row="0"
            Margin="30,15,30,0"
            FontSize="26"
            Text="{x:Bind root:ResourceService.GetLocalized('History/Title')}" />

        <Grid
            Grid.Row="1"
            Height="66"
            Margin="30,5,30,0"
            Style="{StaticResource ListViewHeaderGridStyle}">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <FontIcon
                Grid.Column="0"
                Margin="0,0,12,0"
                FontFamily="{ThemeResource SymbolThemeFontFamily}"
                FontSize="16"
                Glyph="&#xE74C;" />

            <TextBlock
                Grid.Column="1"
                VerticalAlignment="Center"
                Text="{x:Bind root:ResourceService.GetLocalized('History/Operation')}" />
            <AppBarSeparator Grid.Column="2" Margin="10,0,10,0" />

            <TextBlock
                Grid.Column="3"
                VerticalAlignment="Center"
                Text="{x:Bind LocalizeHistoryCountInfo(ViewModel.HistoryDataList.Count), Mode=OneWay}">

                <ToolTipService.ToolTip>
                    <ToolTip Content="{x:Bind LocalizeHistoryCountInfo(ViewModel.HistoryDataList.Count), Mode=OneWay}" Placement="Mouse" />
                </ToolTipService.ToolTip>
            </TextBlock>

            <ContentControl
                Grid.Column="4"
                Margin="0,0,10,0"
                VerticalAlignment="Center"
                IsEnabled="{x:Bind ViewModel.IsLoadedCompleted, Mode=OneWay}">

                <StackPanel
                    x:Name="NormalMode"
                    x:Load="{x:Bind converter:ValueConverterHelper.BooleanReverseConvert(ViewModel.IsSelectMode), Mode=OneWay}"
                    Background="Transparent"
                    Orientation="Horizontal"
                    Spacing="2">

                    <MenuFlyoutItem
                        controlExtensions:CursorHelper.Cursor="Hand"
                        Click="{x:Bind ViewModel.OnSelectClicked}"
                        IsEnabled="{x:Bind sys:Convert.ToBoolean(ViewModel.HistoryDataList.Count), Mode=OneWay}"
                        Style="{StaticResource AppBarButtonMenuItemStyle}"
                        Text="{x:Bind root:ResourceService.GetLocalized('History/Select')}">

                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE762;" />
                        </MenuFlyoutItem.Icon>

                        <ToolTipService.ToolTip>
                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/SelectToolTip')}" Placement="Mouse" />
                        </ToolTipService.ToolTip>
                    </MenuFlyoutItem>

                    <MenuFlyoutItem
                        controlExtensions:CursorHelper.Cursor="Hand"
                        Click="{x:Bind ViewModel.OnFlyoutShowClicked}"
                        IsEnabled="{x:Bind sys:Convert.ToBoolean(ViewModel.HistoryDataList.Count), Mode=OneWay}"
                        Style="{StaticResource AppBarButtonMenuItemStyle}"
                        Text="{x:Bind root:ResourceService.GetLocalized('History/Sort')}">

                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE8cb;" />
                        </MenuFlyoutItem.Icon>

                        <ToolTipService.ToolTip>
                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/SortToolTip')}" Placement="Mouse" />
                        </ToolTipService.ToolTip>

                        <FlyoutBase.AttachedFlyout>
                            <MenuFlyout MenuFlyoutPresenterStyle="{StaticResource MenuFlyoutPresenterStyle}" Placement="Bottom">

                                <RadioMenuFlyoutItem
                                    Click="{x:Bind ViewModel.OnTimeSortClicked}"
                                    IsChecked="{x:Bind converter:ValueCheckConverterHelper.TimeSortValueCheck(ViewModel.TimeSortOrder, x:True), Mode=OneWay}"
                                    Tag="True"
                                    Text="{x:Bind root:ResourceService.GetLocalized('History/TimeIncreaseSort')}">

                                    <RadioMenuFlyoutItem.Icon>
                                        <FontIcon Glyph="&#xE74a;" />
                                    </RadioMenuFlyoutItem.Icon>

                                    <ToolTipService.ToolTip>
                                        <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/TimeIncreaseSortToolTip')}" Placement="Mouse" />
                                    </ToolTipService.ToolTip>
                                </RadioMenuFlyoutItem>

                                <RadioMenuFlyoutItem
                                    Click="{x:Bind ViewModel.OnTimeSortClicked}"
                                    IsChecked="{x:Bind converter:ValueCheckConverterHelper.TimeSortValueCheck(ViewModel.TimeSortOrder, x:False), Mode=OneWay}"
                                    Tag="False"
                                    Text="{x:Bind root:ResourceService.GetLocalized('History/TimeDecreaseSort')}">

                                    <RadioMenuFlyoutItem.Icon>
                                        <FontIcon Glyph="&#xE74b;" />
                                    </RadioMenuFlyoutItem.Icon>

                                    <ToolTipService.ToolTip>
                                        <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/TimeDecreaseSortToolTip')}" Placement="Mouse" />
                                    </ToolTipService.ToolTip>
                                </RadioMenuFlyoutItem>
                            </MenuFlyout>
                        </FlyoutBase.AttachedFlyout>
                    </MenuFlyoutItem>

                    <MenuFlyoutItem
                        controlExtensions:CursorHelper.Cursor="Hand"
                        Click="{x:Bind ViewModel.OnFlyoutShowClicked}"
                        Style="{StaticResource AppBarButtonMenuItemStyle}"
                        Text="{x:Bind root:ResourceService.GetLocalized('History/Filter')}">

                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE71C;" />
                        </MenuFlyoutItem.Icon>

                        <ToolTipService.ToolTip>
                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/FilterToolTip')}" Placement="Mouse" />
                        </ToolTipService.ToolTip>

                        <FlyoutBase.AttachedFlyout>
                            <MenuFlyout MenuFlyoutPresenterStyle="{StaticResource MenuFlyoutPresenterStyle}" Placement="Bottom">
                                <MenuFlyoutSubItem Text="{x:Bind root:ResourceService.GetLocalized('History/Type')}">
                                    <RadioMenuFlyoutItem
                                        Click="{x:Bind ViewModel.OnTypeFilterClicked}"
                                        GroupName="TypeFilter"
                                        IsChecked="{x:Bind converter:ValueCheckConverterHelper.FilterValueCheck(ViewModel.TypeFilter,'url'),Mode=OneWay}"
                                        Tag="url"
                                        Text="{x:Bind root:ResourceService.GetLocalized('Resources/URL')}">

                                        <ToolTipService.ToolTip>
                                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('Resources/URL')}" Placement="Mouse" />
                                        </ToolTipService.ToolTip>
                                    </RadioMenuFlyoutItem>

                                    <RadioMenuFlyoutItem
                                        Click="{x:Bind ViewModel.OnTypeFilterClicked}"
                                        GroupName="TypeFilter"
                                        IsChecked="{x:Bind converter:ValueCheckConverterHelper.FilterValueCheck(ViewModel.TypeFilter,'ProductId'),Mode=OneWay}"
                                        Tag="ProductId"
                                        Text="{x:Bind root:ResourceService.GetLocalized('Resources/ProductID')}">

                                        <ToolTipService.ToolTip>
                                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('Resources/ProductID')}" Placement="Mouse" />
                                        </ToolTipService.ToolTip>
                                    </RadioMenuFlyoutItem>

                                    <RadioMenuFlyoutItem
                                        Click="{x:Bind ViewModel.OnTypeFilterClicked}"
                                        GroupName="TypeFilter"
                                        IsChecked="{x:Bind converter:ValueCheckConverterHelper.FilterValueCheck(ViewModel.TypeFilter,'PackageFamilyName'),Mode=OneWay}"
                                        Tag="PackageFamilyName"
                                        Text="{x:Bind root:ResourceService.GetLocalized('Resources/PackageFamilyName')}">

                                        <ToolTipService.ToolTip>
                                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('Resources/PackageFamilyName')}" Placement="Mouse" />
                                        </ToolTipService.ToolTip>
                                    </RadioMenuFlyoutItem>

                                    <RadioMenuFlyoutItem
                                        Click="{x:Bind ViewModel.OnTypeFilterClicked}"
                                        GroupName="TypeFilter"
                                        IsChecked="{x:Bind converter:ValueCheckConverterHelper.FilterValueCheck(ViewModel.TypeFilter,'CategoryId'),Mode=OneWay}"
                                        Tag="CategoryId"
                                        Text="{x:Bind root:ResourceService.GetLocalized('Resources/CategoryID')}">

                                        <ToolTipService.ToolTip>
                                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('Resources/CategoryID')}" Placement="Mouse" />
                                        </ToolTipService.ToolTip>
                                    </RadioMenuFlyoutItem>

                                    <MenuFlyoutSeparator />

                                    <RadioMenuFlyoutItem
                                        Click="{x:Bind ViewModel.OnTypeFilterClicked}"
                                        GroupName="TypeFilter"
                                        IsChecked="{x:Bind converter:ValueCheckConverterHelper.FilterValueCheck(ViewModel.TypeFilter,'None'),Mode=OneWay}"
                                        Tag="None"
                                        Text="{x:Bind root:ResourceService.GetLocalized('History/None')}">

                                        <ToolTipService.ToolTip>
                                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/None')}" Placement="Mouse" />
                                        </ToolTipService.ToolTip>
                                    </RadioMenuFlyoutItem>
                                </MenuFlyoutSubItem>

                                <MenuFlyoutSubItem Text="{x:Bind root:ResourceService.GetLocalized('History/Channel')}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/Channel')}" Placement="Mouse" />
                                    </ToolTipService.ToolTip>

                                    <RadioMenuFlyoutItem
                                        Click="{x:Bind ViewModel.OnChannelFilterClicked}"
                                        GroupName="ChannelFilter"
                                        IsChecked="{x:Bind converter:ValueCheckConverterHelper.FilterValueCheck(ViewModel.TypeFilter,'WIF'),Mode=OneWay}"
                                        Tag="WIF"
                                        Text="{x:Bind root:ResourceService.GetLocalized('Resources/Fast')}">

                                        <ToolTipService.ToolTip>
                                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('Resources/Fast')}" Placement="Mouse" />
                                        </ToolTipService.ToolTip>
                                    </RadioMenuFlyoutItem>

                                    <RadioMenuFlyoutItem
                                        Click="{x:Bind ViewModel.OnChannelFilterClicked}"
                                        GroupName="ChannelFilter"
                                        IsChecked="{x:Bind converter:ValueCheckConverterHelper.FilterValueCheck(ViewModel.TypeFilter,'WIS'),Mode=OneWay}"
                                        Tag="WIS"
                                        Text="{x:Bind root:ResourceService.GetLocalized('Resources/Slow')}">

                                        <ToolTipService.ToolTip>
                                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('Resources/Slow')}" Placement="Mouse" />
                                        </ToolTipService.ToolTip>
                                    </RadioMenuFlyoutItem>

                                    <RadioMenuFlyoutItem
                                        Click="{x:Bind ViewModel.OnChannelFilterClicked}"
                                        GroupName="ChannelFilter"
                                        IsChecked="{x:Bind converter:ValueCheckConverterHelper.FilterValueCheck(ViewModel.TypeFilter,'RP'),Mode=OneWay}"
                                        Tag="RP"
                                        Text="{x:Bind root:ResourceService.GetLocalized('Resources/RP')}">

                                        <ToolTipService.ToolTip>
                                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('Resources/RP')}" Placement="Mouse" />
                                        </ToolTipService.ToolTip>
                                    </RadioMenuFlyoutItem>

                                    <RadioMenuFlyoutItem
                                        Click="{x:Bind ViewModel.OnChannelFilterClicked}"
                                        GroupName="ChannelFilter"
                                        IsChecked="{x:Bind converter:ValueCheckConverterHelper.FilterValueCheck(ViewModel.TypeFilter,'Retail'),Mode=OneWay}"
                                        Tag="Retail"
                                        Text="{x:Bind root:ResourceService.GetLocalized('Resources/Retail')}">

                                        <ToolTipService.ToolTip>
                                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('Resources/Retail')}" Placement="Mouse" />
                                        </ToolTipService.ToolTip>
                                    </RadioMenuFlyoutItem>

                                    <MenuFlyoutSeparator />

                                    <RadioMenuFlyoutItem
                                        Click="{x:Bind ViewModel.OnChannelFilterClicked}"
                                        GroupName="ChannelFilter"
                                        IsChecked="{x:Bind converter:ValueCheckConverterHelper.FilterValueCheck(ViewModel.TypeFilter,'None'),Mode=OneWay}"
                                        Tag="None"
                                        Text="{x:Bind root:ResourceService.GetLocalized('History/None')}">

                                        <ToolTipService.ToolTip>
                                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/None')}" Placement="Mouse" />
                                        </ToolTipService.ToolTip>
                                    </RadioMenuFlyoutItem>
                                </MenuFlyoutSubItem>
                            </MenuFlyout>
                        </FlyoutBase.AttachedFlyout>
                    </MenuFlyoutItem>

                    <MenuFlyoutItem
                        controlExtensions:CursorHelper.Cursor="Hand"
                        Click="{x:Bind ViewModel.OnRefreshClicked}"
                        IsEnabled="{x:Bind sys:Convert.ToBoolean(ViewModel.HistoryDataList.Count), Mode=OneWay}"
                        Style="{StaticResource AppBarButtonMenuItemStyle}"
                        Text="{x:Bind root:ResourceService.GetLocalized('History/Refresh')}">

                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE72c;" />
                        </MenuFlyoutItem.Icon>

                        <ToolTipService.ToolTip>
                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/RefreshToolTip')}" Placement="Mouse" />
                        </ToolTipService.ToolTip>
                    </MenuFlyoutItem>
                </StackPanel>
            </ContentControl>

            <ContentControl
                Grid.Column="4"
                Margin="0,0,10,0"
                VerticalAlignment="Center"
                IsEnabled="{x:Bind ViewModel.IsLoadedCompleted, Mode=OneWay}">

                <StackPanel
                    x:Name="SelectMode"
                    x:Load="{x:Bind ViewModel.IsSelectMode, Mode=OneWay}"
                    Background="Transparent"
                    Orientation="Horizontal"
                    Spacing="2">

                    <MenuFlyoutItem
                        controlExtensions:CursorHelper.Cursor="Hand"
                        Click="{x:Bind ViewModel.OnSelectAllClicked}"
                        Style="{StaticResource AppBarButtonMenuItemStyle}"
                        Text="{x:Bind root:ResourceService.GetLocalized('History/SelectAll')}">

                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE8b3;" />
                        </MenuFlyoutItem.Icon>

                        <ToolTipService.ToolTip>
                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/SelectAll')}" Placement="Mouse" />
                        </ToolTipService.ToolTip>
                    </MenuFlyoutItem>

                    <MenuFlyoutItem
                        controlExtensions:CursorHelper.Cursor="Hand"
                        Click="{x:Bind ViewModel.OnSelectNoneClicked}"
                        Style="{StaticResource AppBarButtonMenuItemStyle}"
                        Text="{x:Bind root:ResourceService.GetLocalized('History/SelectNone')}">

                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE8e6;" />
                        </MenuFlyoutItem.Icon>

                        <ToolTipService.ToolTip>
                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/SelectNone')}" Placement="Mouse" />
                        </ToolTipService.ToolTip>
                    </MenuFlyoutItem>

                    <MenuFlyoutItem
                        controlExtensions:CursorHelper.Cursor="Hand"
                        Click="{x:Bind ViewModel.OnCopySelectedClicked}"
                        Style="{StaticResource AppBarButtonMenuItemStyle}"
                        Text="{x:Bind root:ResourceService.GetLocalized('History/CopySelected')}">

                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE8c8;" />
                        </MenuFlyoutItem.Icon>

                        <ToolTipService.ToolTip>
                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/CopySelectedToolTip')}" Placement="Mouse" />
                        </ToolTipService.ToolTip>
                    </MenuFlyoutItem>

                    <MenuFlyoutItem
                        controlExtensions:CursorHelper.Cursor="Hand"
                        Click="{x:Bind ViewModel.OnDeleteClicked}"
                        Style="{StaticResource AppBarButtonMenuItemStyle}"
                        Text="{x:Bind root:ResourceService.GetLocalized('History/Delete')}">

                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE74d;" />
                        </MenuFlyoutItem.Icon>

                        <ToolTipService.ToolTip>
                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/DeleteToolTip')}" Placement="Mouse" />
                        </ToolTipService.ToolTip>
                    </MenuFlyoutItem>

                    <MenuFlyoutItem
                        controlExtensions:CursorHelper.Cursor="Hand"
                        Click="{x:Bind ViewModel.OnCancelClicked}"
                        Style="{StaticResource AppBarButtonMenuItemStyle}"
                        Text="{x:Bind root:ResourceService.GetLocalized('History/Cancel')}">

                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE711;" />
                        </MenuFlyoutItem.Icon>

                        <ToolTipService.ToolTip>
                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/CancelToolTip')}" Placement="Mouse" />
                        </ToolTipService.ToolTip>
                    </MenuFlyoutItem>
                </StackPanel>
            </ContentControl>
        </Grid>

        <Grid
            x:Name="LoadingGrid"
            Grid.Row="2"
            Margin="30,3,30,0"
            x:Load="{x:Bind converter:ValueConverterHelper.BooleanReverseConvert(ViewModel.IsLoadedCompleted), Mode=OneWay}"
            Style="{StaticResource CardGridStyle}">

            <StackPanel
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Orientation="Horizontal"
                Spacing="10">

                <ProgressRing IsActive="True" IsEnabled="True" />

                <TextBlock
                    Margin="0,10"
                    VerticalAlignment="Center"
                    Text="{x:Bind root:ResourceService.GetLocalized('History/LoadingHistory')}"
                    TextAlignment="Center">

                    <ToolTipService.ToolTip>
                        <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/LoadingHistory')}" Placement="Mouse" />
                    </ToolTipService.ToolTip>
                </TextBlock>
            </StackPanel>
        </Grid>

        <Grid
            Grid.Row="3"
            Margin="0,3,0,0"
            Visibility="{x:Bind converter:ValueConverterHelper.BooleanToVisibilityConvert(ViewModel.IsLoadedCompleted), Mode=OneWay}">

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Grid
                Grid.Row="0"
                Margin="30,0"
                Style="{StaticResource CardGridStyle}"
                Visibility="{x:Bind converter:ValueConverterHelper.BooleanToVisibilityConvert(ViewModel.IsHistoryEmpty), Mode=OneWay}">

                <TextBlock
                    Margin="0,10,0,10"
                    VerticalAlignment="Center"
                    Text="{x:Bind root:ResourceService.GetLocalized('History/HistoryEmptyDescription')}"
                    TextAlignment="Center" />
            </Grid>

            <Grid Grid.Row="1" Visibility="{x:Bind converter:ValueConverterHelper.BooleanToVisibilityReverseConvert(ViewModel.IsHistoryEmpty), Mode=OneWay}">

                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Grid
                    Grid.Row="0"
                    Margin="30,0"
                    Style="{StaticResource CardGridStyle}"
                    Visibility="{x:Bind converter:ValueConverterHelper.BooleanToVisibilityConvert(ViewModel.IsHistoryEmptyAfterFilter), Mode=OneWay}">
                    <TextBlock
                        Margin="0,10,0,10"
                        VerticalAlignment="Center"
                        Text="{x:Bind root:ResourceService.GetLocalized('History/HistoryFilterEmptyDescription')}"
                        TextAlignment="Center" />
                </Grid>

                <Grid
                    Grid.Row="1"
                    Height="35"
                    Margin="30,0"
                    Padding="6,0,0,0"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    Visibility="{x:Bind converter:ValueConverterHelper.BooleanToVisibilityReverseConvert(ViewModel.IsHistoryEmptyAfterFilter), Mode=OneWay}">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="1.5*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="3*" />
                        <ColumnDefinition Width="135" />
                    </Grid.ColumnDefinitions>

                    <TextBlock
                        Grid.Column="0"
                        Width="50"
                        Margin="10,0,0,0"
                        VerticalAlignment="Center"
                        Text="{x:Bind root:ResourceService.GetLocalized('History/Select')}"
                        Visibility="{x:Bind converter:ValueConverterHelper.BooleanToVisibilityConvert(ViewModel.IsSelectMode), Mode=OneWay}">

                        <ToolTipService.ToolTip>
                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/Select')}" Placement="Mouse" />
                        </ToolTipService.ToolTip>
                    </TextBlock>

                    <TextBlock
                        Grid.Column="1"
                        Margin="10,0,0,0"
                        VerticalAlignment="Center"
                        Text="{x:Bind root:ResourceService.GetLocalized('History/DateTime')}">

                        <ToolTipService.ToolTip>
                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/DateTime')}" Placement="Mouse" />
                        </ToolTipService.ToolTip>
                    </TextBlock>

                    <TextBlock
                        Grid.Column="2"
                        Margin="10,0,0,0"
                        VerticalAlignment="Center"
                        Text="{x:Bind root:ResourceService.GetLocalized('History/Type')}">

                        <ToolTipService.ToolTip>
                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/Type')}" Placement="Mouse" />
                        </ToolTipService.ToolTip>
                    </TextBlock>

                    <TextBlock
                        Grid.Column="3"
                        Margin="10,0,0,0"
                        VerticalAlignment="Center"
                        Text="{x:Bind root:ResourceService.GetLocalized('History/Channel')}">

                        <ToolTipService.ToolTip>
                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/Channel')}" Placement="Mouse" />
                        </ToolTipService.ToolTip>
                    </TextBlock>

                    <TextBlock
                        Grid.Column="4"
                        Margin="10,0,0,0"
                        VerticalAlignment="Center"
                        Text="{x:Bind root:ResourceService.GetLocalized('History/Link')}">

                        <ToolTipService.ToolTip>
                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/Link')}" Placement="Mouse" />
                        </ToolTipService.ToolTip>
                    </TextBlock>

                    <TextBlock
                        Grid.Column="5"
                        Grid.ColumnSpan="2"
                        Margin="10,0,0,0"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Center"
                        Text="{x:Bind root:ResourceService.GetLocalized('History/Options')}">

                        <ToolTipService.ToolTip>
                            <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/OptionsToolTip')}" Placement="Mouse" />
                        </ToolTipService.ToolTip>
                    </TextBlock>
                </Grid>

                <ListView
                    Grid.Row="2"
                    Padding="30,0,30,30"
                    IsItemClickEnabled="{x:Bind ViewModel.IsSelectMode, Mode=OneWay}"
                    ItemClick="{x:Bind ViewModel.OnItemClicked}"
                    ItemContainerStyle="{StaticResource DataGridListViewItemStyle}"
                    ItemsSource="{x:Bind ViewModel.HistoryDataList, Mode=OneWay}"
                    ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                    ScrollViewer.HorizontalScrollMode="Disabled"
                    ScrollViewer.VerticalScrollBarVisibility="Auto"
                    ScrollViewer.VerticalScrollMode="Enabled"
                    SelectionMode="None"
                    Style="{StaticResource ListViewStyle}"
                    Visibility="{x:Bind converter:ValueConverterHelper.BooleanToVisibilityReverseConvert(ViewModel.IsHistoryEmptyAfterFilter), Mode=OneWay}">

                    <ListView.ItemTemplate>
                        <DataTemplate x:DataType="history:HistoryModel">
                            <Grid
                                Height="35"
                                Padding="6,0,0,0"
                                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                BorderThickness="1,0,1,1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="1.5*" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="3*" />
                                    <ColumnDefinition Width="70" />
                                    <ColumnDefinition Width="65" />
                                </Grid.ColumnDefinitions>

                                <CheckBox
                                    Grid.Column="0"
                                    Width="50"
                                    Margin="10,0,0,0"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Center"
                                    controlExtensions:CursorHelper.Cursor="Hand"
                                    IsChecked="{x:Bind IsSelected, Mode=TwoWay}"
                                    IsThreeState="False"
                                    Style="{StaticResource CheckBoxStyle}"
                                    Visibility="{x:Bind converter:ValueConverterHelper.BooleanToVisibilityConvert(IsSelectMode), Mode=OneWay}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip Content="{x:Bind converter:StringConverterHelper.CheckBoxToolTipFormat(IsSelected,'History'),Mode=OneWay}" Placement="Mouse" />
                                    </ToolTipService.ToolTip>
                                </CheckBox>

                                <TextBlock
                                    Grid.Column="1"
                                    Margin="10,0,0,0"
                                    VerticalAlignment="Center"
                                    Style="{StaticResource CardTextStyle}"
                                    Text="{x:Bind converter:StringConverterHelper.TimeStampFormat(CreateTimeStamp)}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip Content="{x:Bind converter:StringConverterHelper.TimeStampFormat(CreateTimeStamp)}" Placement="Mouse" />
                                    </ToolTipService.ToolTip>
                                </TextBlock>

                                <TextBlock
                                    Grid.Column="2"
                                    Margin="10,0,0,0"
                                    VerticalAlignment="Center"
                                    Style="{StaticResource CardTextStyle}"
                                    Text="{x:Bind converter:StringConverterHelper.TypeNameFormat(HistoryType)}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip Content="{x:Bind converter:StringConverterHelper.TypeNameFormat(HistoryType)}" Placement="Mouse" />
                                    </ToolTipService.ToolTip>
                                </TextBlock>

                                <TextBlock
                                    Grid.Column="3"
                                    Margin="10,0,0,0"
                                    VerticalAlignment="Center"
                                    Style="{StaticResource CardTextStyle}"
                                    Text="{x:Bind converter:StringConverterHelper.ChannelNameFormat(HistoryChannel)}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip Content="{x:Bind converter:StringConverterHelper.ChannelNameFormat(HistoryChannel)}" Placement="Mouse" />
                                    </ToolTipService.ToolTip>
                                </TextBlock>

                                <TextBlock
                                    Grid.Column="4"
                                    Margin="10,0,0,0"
                                    VerticalAlignment="Center"
                                    Style="{StaticResource CardTextStyle}"
                                    Text="{x:Bind HistoryLink}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip Content="{x:Bind HistoryLink}" Placement="Mouse" />
                                    </ToolTipService.ToolTip>
                                </TextBlock>

                                <HyperlinkButton
                                    Grid.Column="5"
                                    Margin="10,0,0,0"
                                    Command="{Binding ElementName=HistoryRoot, Path=DataContext.FillinCommand, Mode=OneTime}"
                                    CommandParameter="{Binding}"
                                    Content="{x:Bind root:ResourceService.GetLocalized('History/Fillin')}"
                                    IsEnabled="{x:Bind converter:ValueConverterHelper.BooleanReverseConvert(IsSelectMode), Mode=OneWay}"
                                    Style="{StaticResource HyperlinkButtonStyle}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/FillinToolTip')}" Placement="Mouse" />
                                    </ToolTipService.ToolTip>
                                </HyperlinkButton>

                                <HyperlinkButton
                                    Grid.Column="6"
                                    Command="{Binding ElementName=HistoryRoot, Path=DataContext.CopyCommand, Mode=OneTime}"
                                    CommandParameter="{Binding}"
                                    Content="{x:Bind root:ResourceService.GetLocalized('History/Copy')}"
                                    IsEnabled="{x:Bind converter:ValueConverterHelper.BooleanReverseConvert(IsSelectMode), Mode=OneWay}"
                                    Style="{StaticResource HyperlinkButtonStyle}">

                                    <ToolTipService.ToolTip>
                                        <ToolTip Content="{x:Bind root:ResourceService.GetLocalized('History/CopyToolTip')}" Placement="Mouse" />
                                    </ToolTipService.ToolTip>
                                </HyperlinkButton>
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </Grid>
        </Grid>
    </Grid>
</Page>
